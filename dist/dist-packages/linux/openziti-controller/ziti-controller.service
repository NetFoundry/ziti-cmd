[Unit]
Description=OpenZiti Controller
After=network-online.target

[Service]
Type=simple
DynamicUser=yes
AmbientCapabilities=CAP_NET_BIND_SERVICE
StateDirectory=ziti-controller
# WorkingDirectory=/var/lib/ziti-controller
# set a password as literal string
SetCredential=ZITI_PWD:admin
# or load password from a file; set owner to root and chmod 0400 for security
# LoadCredential=ZITI_PWD:/opt/openziti/etc/controller/.ziti_pwd
UMask=0007
Restart=always
RestartSec=3
LimitNOFILE=65535
EnvironmentFile=/opt/openziti/etc/controller/env
ExecStartPre=/opt/openziti/etc/controller/bootstrap.bash
ExecStart=/opt/openziti/etc/controller/entrypoint.bash

[Install]
WantedBy=multi-user.target
